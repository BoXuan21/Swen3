module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},43409,(a,b,c)=>{"use strict";b.exports=a.r(18622)},5506,(a,b,c)=>{"use strict";b.exports=a.r(43409).vendored["react-ssr"].ReactJsxRuntime},43432,(a,b,c)=>{"use strict";b.exports=a.r(43409).vendored["react-ssr"].React},77293,a=>{a.v({actions:"page-module__ezT-GW__actions",btnDelete:"page-module__ezT-GW__btnDelete",btnDownload:"page-module__ezT-GW__btnDownload",btnPreview:"page-module__ezT-GW__btnPreview",buttonPrimary:"page-module__ezT-GW__buttonPrimary",buttonSecondary:"page-module__ezT-GW__buttonSecondary",buttonSuccess:"page-module__ezT-GW__buttonSuccess",card:"page-module__ezT-GW__card",closeButton:"page-module__ezT-GW__closeButton",container:"page-module__ezT-GW__container",controls:"page-module__ezT-GW__controls",docCard:"page-module__ezT-GW__docCard",docMeta:"page-module__ezT-GW__docMeta",docTitle:"page-module__ezT-GW__docTitle",documentsGrid:"page-module__ezT-GW__documentsGrid",dropHint:"page-module__ezT-GW__dropHint",dropSubHint:"page-module__ezT-GW__dropSubHint",dropZone:"page-module__ezT-GW__dropZone",dropZoneActive:"page-module__ezT-GW__dropZoneActive",empty:"page-module__ezT-GW__empty",emptyPrimary:"page-module__ezT-GW__emptyPrimary",emptySecondary:"page-module__ezT-GW__emptySecondary",errorBox:"page-module__ezT-GW__errorBox",fileInfo:"page-module__ezT-GW__fileInfo",formActions:"page-module__ezT-GW__formActions",formContainer:"page-module__ezT-GW__formContainer",formGrid:"page-module__ezT-GW__formGrid",formTitle:"page-module__ezT-GW__formTitle",header:"page-module__ezT-GW__header",hiddenInput:"page-module__ezT-GW__hiddenInput",input:"page-module__ezT-GW__input",loading:"page-module__ezT-GW__loading",loadingText:"page-module__ezT-GW__loadingText",metric:"page-module__ezT-GW__metric",metricBlue:"page-module__ezT-GW__metricBlue",metricGreen:"page-module__ezT-GW__metricGreen",metricPurple:"page-module__ezT-GW__metricPurple",modalActions:"page-module__ezT-GW__modalActions",modalContent:"page-module__ezT-GW__modalContent",modalDownloadBtn:"page-module__ezT-GW__modalDownloadBtn",modalFrame:"page-module__ezT-GW__modalFrame",modalHeader:"page-module__ezT-GW__modalHeader",modalOverlay:"page-module__ezT-GW__modalOverlay",modalTitle:"page-module__ezT-GW__modalTitle",previewContainer:"page-module__ezT-GW__previewContainer",previewFrame:"page-module__ezT-GW__previewFrame",previewLabel:"page-module__ezT-GW__previewLabel",previewPlaceholder:"page-module__ezT-GW__previewPlaceholder",root:"page-module__ezT-GW__root",sizeMeter:"page-module__ezT-GW__sizeMeter",sizeMeterFill:"page-module__ezT-GW__sizeMeterFill",sizePill:"page-module__ezT-GW__sizePill",statsGrid:"page-module__ezT-GW__statsGrid",subtitle:"page-module__ezT-GW__subtitle",successBox:"page-module__ezT-GW__successBox",title:"page-module__ezT-GW__title"})},19972,a=>{"use strict";var b=a.i(5506),c=a.i(43432),d=a.i(77293);let e=a=>`${a}`;function f(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null),[z,A]=(0,c.useState)(null),B=e("/api/Documents"),C=async()=>{try{h(!0),j(null);let a=await fetch(B);if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let b=await a.json();f(b)}catch(a){j(a instanceof Error?a.message:"Failed to fetch documents")}finally{h(!1)}},D=()=>{n(""),p(null),v(null),x(!1),y.current&&(y.current.value=""),q&&URL.revokeObjectURL(q),r(null)},E=async()=>{try{if(v(null),j(null),!m.trim())throw Error("Please provide a document title.");if(!o)throw Error("Please drop a PDF file.");if(o.size>0x1900000)throw Error("File exceeds 25 MB limit.");let a=new FormData;a.append("title",m.trim()),a.append("file",o),t(!0);let b=await fetch(B,{method:"POST",body:a});if(!b.ok){let a=await b.text();throw Error(a||`HTTP error! status: ${b.status}`)}let c=await b.json();f(a=>[c,...a]),D(),v("Document uploaded successfully.")}catch(a){j(a instanceof Error?a.message:"Failed to upload document")}finally{t(!1)}};(0,c.useEffect)(()=>()=>{q&&URL.revokeObjectURL(q)},[q]);let F=async b=>{try{let c=await fetch(`${B}/${b}`,{method:"DELETE"});if(!c.ok)throw Error(`HTTP error! status: ${c.status}`);f(a.filter(a=>a.id!==b))}catch(a){j(a instanceof Error?a.message:"Failed to delete document")}};(0,c.useEffect)(()=>{C()},[]),(0,c.useEffect)(()=>{k&&v(null)},[k]);let G=a=>{if(a){if("application/pdf"!==a.type&&!a.name.toLowerCase().endsWith(".pdf"))return void j("Only PDF files are supported.");if(a.size>0x1900000)return void j("File exceeds 25 MB limit.");j(null),p(a),q&&URL.revokeObjectURL(q),r(URL.createObjectURL(a))}},H=o?o.size/0x1900000*100:0,I=async b=>{try{let c=a.find(a=>a.id===b),d=e(`/api/Documents/${b}/content`),f=await fetch(d);if(!f.ok)throw Error("Download failed");let g=await f.blob(),h=window.URL.createObjectURL(g),i=document.createElement("a");i.href=h,i.download=c?.fileName||"document.pdf",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(h),document.body.removeChild(i)}catch(a){j(a instanceof Error?a.message:"Failed to download document")}},J=()=>{console.log("Closing preview"),A(null)};return(0,b.jsx)("div",{className:d.default.root,children:(0,b.jsxs)("div",{className:d.default.container,children:[(0,b.jsxs)("div",{className:d.default.header,children:[(0,b.jsx)("h1",{className:d.default.title,children:"ðŸ“Š Document Dashboard"}),(0,b.jsx)("p",{className:d.default.subtitle,children:"Manage your documents efficiently"})]}),(0,b.jsx)("div",{className:d.default.statsGrid,children:(0,b.jsxs)("div",{className:d.default.card,children:[(0,b.jsx)("div",{className:`${d.default.metric} ${d.default.metricBlue}`,children:a.length}),(0,b.jsx)("div",{className:d.default.subtitle,children:"Total Documents"})]})}),(0,b.jsxs)("div",{className:d.default.controls,children:[(0,b.jsx)("button",{onClick:C,className:d.default.buttonPrimary,children:"ðŸ”„ Refresh"}),(0,b.jsx)("button",{onClick:()=>l(!k),className:d.default.buttonSuccess,children:"âž• Add Document"})]}),i&&(0,b.jsxs)("div",{className:d.default.errorBox,children:["Error: ",i]}),k&&(0,b.jsxs)("div",{className:d.default.formContainer,children:[(0,b.jsxs)("h3",{className:d.default.formTitle,children:["Upload PDF (Max ",25," MB)"]}),(0,b.jsx)("div",{className:d.default.formGrid,children:(0,b.jsx)("input",{type:"text",placeholder:"Document Title",value:m,onChange:a=>n(a.target.value),className:d.default.input})}),(0,b.jsxs)("div",{className:`${d.default.dropZone} ${w?d.default.dropZoneActive:""}`,onDragOver:a=>{a.preventDefault(),x(!0)},onDragLeave:a=>{a.preventDefault(),x(!1)},onDrop:a=>{a.preventDefault(),x(!1),G(a.dataTransfer.files?.[0]??null)},onClick:()=>y.current?.click(),role:"button",tabIndex:0,onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),y.current?.click())},children:[(0,b.jsx)("p",{className:d.default.dropHint,children:"Drag and drop your PDF here, or click to browse"}),(0,b.jsxs)("p",{className:d.default.dropSubHint,children:["Accepted format: PDF Â· Maximum size ",25," MB"]}),o&&(0,b.jsxs)("div",{className:d.default.fileInfo,children:[(0,b.jsx)("span",{children:o.name}),(0,b.jsxs)("span",{children:[(o.size/1048576).toFixed(2)," MB"]})]}),(0,b.jsx)("div",{className:d.default.sizeMeter,children:(0,b.jsx)("div",{className:d.default.sizeMeterFill,style:{width:`${Math.min(H,100)}%`}})})]}),(0,b.jsx)("input",{ref:y,type:"file",accept:"application/pdf",className:d.default.hiddenInput,onChange:a=>G(a.target.files?.[0]??null)}),q?(0,b.jsxs)("div",{className:d.default.previewContainer,children:[(0,b.jsx)("p",{className:d.default.previewLabel,children:"Preview"}),(0,b.jsx)("iframe",{src:q,className:d.default.previewFrame,title:"PDF preview"})]}):(0,b.jsx)("div",{className:d.default.previewPlaceholder,children:"Drop a PDF to see a preview."}),(0,b.jsxs)("div",{className:d.default.formActions,children:[(0,b.jsx)("button",{onClick:E,className:d.default.buttonPrimary,disabled:s,children:s?"Uploadingâ€¦":"Upload Document"}),(0,b.jsx)("button",{onClick:()=>{l(!1),D()},className:d.default.buttonSecondary,disabled:s,children:"Cancel"})]}),u&&(0,b.jsx)("div",{className:d.default.successBox,children:u})]}),g?(0,b.jsx)("div",{className:d.default.loading,children:(0,b.jsx)("div",{className:d.default.loadingText,children:"Loading documents..."})}):0===a.length?(0,b.jsxs)("div",{className:d.default.empty,children:[(0,b.jsx)("div",{className:d.default.emptyPrimary,children:"ðŸ“­ No documents found"}),(0,b.jsx)("div",{className:d.default.emptySecondary,children:"Start by adding your first document!"})]}):(0,b.jsx)("div",{className:d.default.documentsGrid,children:a.map(a=>(0,b.jsxs)("div",{className:d.default.docCard,children:[(0,b.jsx)("h3",{className:d.default.docTitle,children:a.title}),(0,b.jsxs)("div",{className:d.default.docMeta,children:[(0,b.jsxs)("div",{children:["ðŸ“ ",a.fileName]}),(0,b.jsxs)("div",{children:["ðŸ“… ",new Date(a.uploadedAt).toLocaleDateString()]}),(0,b.jsxs)("div",{children:["ðŸ·ï¸ ",a.mimeType]}),(0,b.jsxs)("div",{className:d.default.sizePill,children:[(a.size/1048576).toFixed(2)," MB"]})]}),(0,b.jsxs)("div",{className:d.default.actions,children:[(0,b.jsx)("button",{onClick:()=>{var b;console.log("Opening preview for document:",b=a.id),A(b)},className:d.default.btnPreview,children:"ðŸ‘ï¸ Preview"}),(0,b.jsx)("button",{onClick:()=>I(a.id),className:d.default.btnDownload,children:"â¬‡ï¸ Download"}),(0,b.jsx)("button",{onClick:()=>F(a.id),className:d.default.btnDelete,children:"ðŸ—‘ï¸ Delete"})]})]},a.id))}),z&&(0,b.jsx)("div",{className:d.default.modalOverlay,onClick:J,children:(0,b.jsxs)("div",{className:d.default.modalContent,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:d.default.modalHeader,children:[(0,b.jsx)("h2",{className:d.default.modalTitle,children:a.find(a=>a.id===z)?.title||"Document Preview"}),(0,b.jsxs)("div",{className:d.default.modalActions,children:[(0,b.jsx)("button",{onClick:()=>I(z),className:d.default.modalDownloadBtn,children:"â¬‡ï¸ Download"}),(0,b.jsx)("button",{onClick:J,className:d.default.closeButton,children:"âœ•"})]})]}),(0,b.jsx)("iframe",{src:e(`/api/Documents/${z}/content`),className:d.default.modalFrame,title:"Document preview"})]})})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cdcfe667._.js.map