(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16289,e=>{e.v({actions:"page-module__ezT-GW__actions",btnDelete:"page-module__ezT-GW__btnDelete",btnDownload:"page-module__ezT-GW__btnDownload",btnPreview:"page-module__ezT-GW__btnPreview",buttonPrimary:"page-module__ezT-GW__buttonPrimary",buttonSecondary:"page-module__ezT-GW__buttonSecondary",buttonSuccess:"page-module__ezT-GW__buttonSuccess",card:"page-module__ezT-GW__card",closeButton:"page-module__ezT-GW__closeButton",container:"page-module__ezT-GW__container",controls:"page-module__ezT-GW__controls",docCard:"page-module__ezT-GW__docCard",docMeta:"page-module__ezT-GW__docMeta",docTitle:"page-module__ezT-GW__docTitle",documentsGrid:"page-module__ezT-GW__documentsGrid",dropHint:"page-module__ezT-GW__dropHint",dropSubHint:"page-module__ezT-GW__dropSubHint",dropZone:"page-module__ezT-GW__dropZone",dropZoneActive:"page-module__ezT-GW__dropZoneActive",empty:"page-module__ezT-GW__empty",emptyPrimary:"page-module__ezT-GW__emptyPrimary",emptySecondary:"page-module__ezT-GW__emptySecondary",errorBox:"page-module__ezT-GW__errorBox",fileInfo:"page-module__ezT-GW__fileInfo",formActions:"page-module__ezT-GW__formActions",formContainer:"page-module__ezT-GW__formContainer",formGrid:"page-module__ezT-GW__formGrid",formTitle:"page-module__ezT-GW__formTitle",header:"page-module__ezT-GW__header",hiddenInput:"page-module__ezT-GW__hiddenInput",input:"page-module__ezT-GW__input",loading:"page-module__ezT-GW__loading",loadingText:"page-module__ezT-GW__loadingText",metric:"page-module__ezT-GW__metric",metricBlue:"page-module__ezT-GW__metricBlue",metricGreen:"page-module__ezT-GW__metricGreen",metricPurple:"page-module__ezT-GW__metricPurple",modalActions:"page-module__ezT-GW__modalActions",modalContent:"page-module__ezT-GW__modalContent",modalDownloadBtn:"page-module__ezT-GW__modalDownloadBtn",modalFrame:"page-module__ezT-GW__modalFrame",modalHeader:"page-module__ezT-GW__modalHeader",modalOverlay:"page-module__ezT-GW__modalOverlay",modalTitle:"page-module__ezT-GW__modalTitle",previewContainer:"page-module__ezT-GW__previewContainer",previewFrame:"page-module__ezT-GW__previewFrame",previewLabel:"page-module__ezT-GW__previewLabel",previewPlaceholder:"page-module__ezT-GW__previewPlaceholder",root:"page-module__ezT-GW__root",sizeMeter:"page-module__ezT-GW__sizeMeter",sizeMeterFill:"page-module__ezT-GW__sizeMeterFill",sizePill:"page-module__ezT-GW__sizePill",statsGrid:"page-module__ezT-GW__statsGrid",subtitle:"page-module__ezT-GW__subtitle",successBox:"page-module__ezT-GW__successBox",title:"page-module__ezT-GW__title"})},38965,e=>{"use strict";var a=e.i(36899),l=e.i(51361),t=e.i(16289);let d=e=>`${e}`;function o(){let[e,o]=(0,l.useState)([]),[i,s]=(0,l.useState)(!0),[r,n]=(0,l.useState)(null),[c,u]=(0,l.useState)(!1),[m,_]=(0,l.useState)(""),[p,f]=(0,l.useState)(null),[h,g]=(0,l.useState)(null),[v,T]=(0,l.useState)(!1),[x,z]=(0,l.useState)(null),[j,G]=(0,l.useState)(!1),b=(0,l.useRef)(null),[w,N]=(0,l.useState)(null),W=d("/api/Documents"),y=async()=>{try{s(!0),n(null);let e=await fetch(W);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let a=await e.json();o(a)}catch(e){n(e instanceof Error?e.message:"Failed to fetch documents")}finally{s(!1)}},D=()=>{_(""),f(null),z(null),G(!1),b.current&&(b.current.value=""),h&&URL.revokeObjectURL(h),g(null)},P=async()=>{try{if(z(null),n(null),!m.trim())throw Error("Please provide a document title.");if(!p)throw Error("Please drop a PDF file.");if(p.size>0x1900000)throw Error("File exceeds 25 MB limit.");let e=new FormData;e.append("title",m.trim()),e.append("file",p),T(!0);let a=await fetch(W,{method:"POST",body:e});if(!a.ok){let e=await a.text();throw Error(e||`HTTP error! status: ${a.status}`)}let l=await a.json();o(e=>[l,...e]),D(),z("Document uploaded successfully.")}catch(e){n(e instanceof Error?e.message:"Failed to upload document")}finally{T(!1)}};(0,l.useEffect)(()=>()=>{h&&URL.revokeObjectURL(h)},[h]);let C=async a=>{try{let l=await fetch(`${W}/${a}`,{method:"DELETE"});if(!l.ok)throw Error(`HTTP error! status: ${l.status}`);o(e.filter(e=>e.id!==a))}catch(e){n(e instanceof Error?e.message:"Failed to delete document")}};(0,l.useEffect)(()=>{y()},[]),(0,l.useEffect)(()=>{c&&z(null)},[c]);let S=e=>{if(e){if("application/pdf"!==e.type&&!e.name.toLowerCase().endsWith(".pdf"))return void n("Only PDF files are supported.");if(e.size>0x1900000)return void n("File exceeds 25 MB limit.");n(null),f(e),h&&URL.revokeObjectURL(h),g(URL.createObjectURL(e))}},k=p?p.size/0x1900000*100:0,F=async a=>{try{let l=e.find(e=>e.id===a),t=d(`/api/Documents/${a}/content`),o=await fetch(t);if(!o.ok)throw Error("Download failed");let i=await o.blob(),s=window.URL.createObjectURL(i),r=document.createElement("a");r.href=s,r.download=l?.fileName||"document.pdf",document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r)}catch(e){n(e instanceof Error?e.message:"Failed to download document")}},B=()=>{console.log("Closing preview"),N(null)};return(0,a.jsx)("div",{className:t.default.root,children:(0,a.jsxs)("div",{className:t.default.container,children:[(0,a.jsxs)("div",{className:t.default.header,children:[(0,a.jsx)("h1",{className:t.default.title,children:"ðŸ“Š Document Dashboard"}),(0,a.jsx)("p",{className:t.default.subtitle,children:"Manage your documents efficiently"})]}),(0,a.jsx)("div",{className:t.default.statsGrid,children:(0,a.jsxs)("div",{className:t.default.card,children:[(0,a.jsx)("div",{className:`${t.default.metric} ${t.default.metricBlue}`,children:e.length}),(0,a.jsx)("div",{className:t.default.subtitle,children:"Total Documents"})]})}),(0,a.jsxs)("div",{className:t.default.controls,children:[(0,a.jsx)("button",{onClick:y,className:t.default.buttonPrimary,children:"ðŸ”„ Refresh"}),(0,a.jsx)("button",{onClick:()=>u(!c),className:t.default.buttonSuccess,children:"âž• Add Document"})]}),r&&(0,a.jsxs)("div",{className:t.default.errorBox,children:["Error: ",r]}),c&&(0,a.jsxs)("div",{className:t.default.formContainer,children:[(0,a.jsxs)("h3",{className:t.default.formTitle,children:["Upload PDF (Max ",25," MB)"]}),(0,a.jsx)("div",{className:t.default.formGrid,children:(0,a.jsx)("input",{type:"text",placeholder:"Document Title",value:m,onChange:e=>_(e.target.value),className:t.default.input})}),(0,a.jsxs)("div",{className:`${t.default.dropZone} ${j?t.default.dropZoneActive:""}`,onDragOver:e=>{e.preventDefault(),G(!0)},onDragLeave:e=>{e.preventDefault(),G(!1)},onDrop:e=>{e.preventDefault(),G(!1),S(e.dataTransfer.files?.[0]??null)},onClick:()=>b.current?.click(),role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b.current?.click())},children:[(0,a.jsx)("p",{className:t.default.dropHint,children:"Drag and drop your PDF here, or click to browse"}),(0,a.jsxs)("p",{className:t.default.dropSubHint,children:["Accepted format: PDF Â· Maximum size ",25," MB"]}),p&&(0,a.jsxs)("div",{className:t.default.fileInfo,children:[(0,a.jsx)("span",{children:p.name}),(0,a.jsxs)("span",{children:[(p.size/1048576).toFixed(2)," MB"]})]}),(0,a.jsx)("div",{className:t.default.sizeMeter,children:(0,a.jsx)("div",{className:t.default.sizeMeterFill,style:{width:`${Math.min(k,100)}%`}})})]}),(0,a.jsx)("input",{ref:b,type:"file",accept:"application/pdf",className:t.default.hiddenInput,onChange:e=>S(e.target.files?.[0]??null)}),h?(0,a.jsxs)("div",{className:t.default.previewContainer,children:[(0,a.jsx)("p",{className:t.default.previewLabel,children:"Preview"}),(0,a.jsx)("iframe",{src:h,className:t.default.previewFrame,title:"PDF preview"})]}):(0,a.jsx)("div",{className:t.default.previewPlaceholder,children:"Drop a PDF to see a preview."}),(0,a.jsxs)("div",{className:t.default.formActions,children:[(0,a.jsx)("button",{onClick:P,className:t.default.buttonPrimary,disabled:v,children:v?"Uploadingâ€¦":"Upload Document"}),(0,a.jsx)("button",{onClick:()=>{u(!1),D()},className:t.default.buttonSecondary,disabled:v,children:"Cancel"})]}),x&&(0,a.jsx)("div",{className:t.default.successBox,children:x})]}),i?(0,a.jsx)("div",{className:t.default.loading,children:(0,a.jsx)("div",{className:t.default.loadingText,children:"Loading documents..."})}):0===e.length?(0,a.jsxs)("div",{className:t.default.empty,children:[(0,a.jsx)("div",{className:t.default.emptyPrimary,children:"ðŸ“­ No documents found"}),(0,a.jsx)("div",{className:t.default.emptySecondary,children:"Start by adding your first document!"})]}):(0,a.jsx)("div",{className:t.default.documentsGrid,children:e.map(e=>(0,a.jsxs)("div",{className:t.default.docCard,children:[(0,a.jsx)("h3",{className:t.default.docTitle,children:e.title}),(0,a.jsxs)("div",{className:t.default.docMeta,children:[(0,a.jsxs)("div",{children:["ðŸ“ ",e.fileName]}),(0,a.jsxs)("div",{children:["ðŸ“… ",new Date(e.uploadedAt).toLocaleDateString()]}),(0,a.jsxs)("div",{children:["ðŸ·ï¸ ",e.mimeType]}),(0,a.jsxs)("div",{className:t.default.sizePill,children:[(e.size/1048576).toFixed(2)," MB"]})]}),(0,a.jsxs)("div",{className:t.default.actions,children:[(0,a.jsx)("button",{onClick:()=>{var a;console.log("Opening preview for document:",a=e.id),N(a)},className:t.default.btnPreview,children:"ðŸ‘ï¸ Preview"}),(0,a.jsx)("button",{onClick:()=>F(e.id),className:t.default.btnDownload,children:"â¬‡ï¸ Download"}),(0,a.jsx)("button",{onClick:()=>C(e.id),className:t.default.btnDelete,children:"ðŸ—‘ï¸ Delete"})]})]},e.id))}),w&&(0,a.jsx)("div",{className:t.default.modalOverlay,onClick:B,children:(0,a.jsxs)("div",{className:t.default.modalContent,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:t.default.modalHeader,children:[(0,a.jsx)("h2",{className:t.default.modalTitle,children:e.find(e=>e.id===w)?.title||"Document Preview"}),(0,a.jsxs)("div",{className:t.default.modalActions,children:[(0,a.jsx)("button",{onClick:()=>F(w),className:t.default.modalDownloadBtn,children:"â¬‡ï¸ Download"}),(0,a.jsx)("button",{onClick:B,className:t.default.closeButton,children:"âœ•"})]})]}),(0,a.jsx)("iframe",{src:d(`/api/Documents/${w}/content`),className:t.default.modalFrame,title:"Document preview"})]})})]})})}e.s(["default",()=>o])}]);